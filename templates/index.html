<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link rel="manifest" href="/manifest.json?v=final">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0f1020">
<link rel="apple-touch-icon" href="https://raw.githubusercontent.com/izumi02-ui/izumi-downloader/refs/heads/main/file_0000000086cc7206b52bd98a7f95f826.png">

<title>Nexus ‚Äî Advanced Media Saving System</title>
<meta name="description" content="NEXUS'S System: High-speed Instagram media fetching with I engine.">

<meta property="og:title" content="NEXUS : MEDIA SAVING SYSTEM">
<meta property="og:description" content="Download high-quality Instagram media instantly via Nexus's Engine.">
<meta property="og:image" content="https://raw.githubusercontent.com/izumi02-ui/izumi-downloader/refs/heads/main/New%20Project%206%20%5B43F93B0%5D.png">
<meta property="og:type" content="website">

<style>
/* üèéÔ∏è PERFORMANCE LAYER & SF PRO TYPEFACE */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;800&display=swap');

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0; min-height: 100vh;
  display: flex; align-items: center; justify-content: center;
  background: radial-gradient(circle at top, #0f1020, #05050a) no-repeat center center fixed;
  background-size: cover;
  font-family: 'Poppins', -apple-system, sans-serif;
  color: white; overflow: hidden;
  position: fixed; width: 100%; height: 100%;
}

/* üß¨ iOS GLASS MORPHISM */
.glass {
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(35px) saturate(180%);
  -webkit-backdrop-filter: blur(35px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

#overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.4); z-index: 999;
  display: none; opacity: 0; transition: opacity 0.4s ease;
}

/* üé¨ HYPER OS 3.0 CONTROL BAR ANIMATION */
.sidebar {
  position: fixed; top: 10px; right: 10px; bottom: 10px;
  width: 300px; border-radius: 35px;
  z-index: 1000; 
  transform: translate3d(115%, 0, 0) scale(0.9); /* HyperOS Pop-out start */
  transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  padding: 60px 20px 20px;
}
.sidebar.active { transform: translate3d(0, 0, 0) scale(1); }
.sidebar h2 { font-size: 18px; letter-spacing: 1px; color: #8f7bff; margin-bottom: 25px; }

/* üíé UPDATED UI ELEMENTS */
.card { 
  width: 92%; max-width: 420px; 
  border-radius: 40px; padding: 40px 30px; 
  text-align: center; 
  animation: cardEntry 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
}
@keyframes cardEntry { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

.logo { font-size: 38px; font-weight: 800; letter-spacing: 3px; text-transform: uppercase; }
.logo span { color: #8f7bff; }
.subtitle { font-size: 10px; opacity: .5; margin-bottom: 30px; text-transform: uppercase; }

input { 
  width: 100%; padding: 20px; border-radius: 20px; border: none; 
  background: rgba(255, 255, 255, 0.05); color: white; margin-bottom: 15px; 
  transition: 0.3s;
}
input:focus { background: rgba(255, 255, 255, 0.1); box-shadow: 0 0 0 3px rgba(143, 123, 255, 0.2); }

button { 
  width: 100%; padding: 18px; border-radius: 20px; border: none; 
  font-weight: 700; font-size: 15px; color: white; 
  background: linear-gradient(135deg, #7b5cff, #9b6dff); 
  box-shadow: 0 10px 20px rgba(123,92,255,0.25); cursor: pointer;
}
button:active { transform: scale(0.97); }

/* üìë HISTORY (NO DOWNLOAD LINK - LOG ONLY) */
.history-item {
  background: rgba(255,255,255,0.03); padding: 16px;
  border-radius: 20px; margin-bottom: 12px;
  display: flex; flex-direction: column; gap: 4px;
  border: 1px solid rgba(255,255,255,0.05);
  position: relative;
}
.history-user { font-size: 12px; font-weight: 700; color: #8f7bff; }
.history-desc { font-size: 11px; color: rgba(255,255,255,0.5); line-height: 1.4; }
.history-meta { font-size: 9px; opacity: 0.4; margin-top: 5px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 5px; }

.delete-dropdown {
  position: absolute; top: 10px; right: 45px;
  background: #ff3b30; color: white; border-radius: 12px;
  padding: 8px 15px; font-size: 11px; font-weight: bold;
  display: none; z-index: 10; animation: popUp 0.3s cubic-bezier(0.1, 0.9, 0.2, 1);
}
@keyframes popUp { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

#splash {
  position: fixed; inset: 0; background: #000; z-index: 9999;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  transition: opacity 0.8s ease;
}
.footer { margin-top: 30px; font-size: 9px; opacity: .3; letter-spacing: 1.5px; text-transform: uppercase; }
</style>
</head>
<body>

<div id="overlay" onclick="toggleSidebar()"></div>

<div id="splash">
  <div class="splash-logo" style="font-size: 42px; font-weight: 800; letter-spacing: 5px;">IZUMI</div>
  <p style="font-size: 8px; opacity: 0.4; letter-spacing: 3px; margin-top: 20px;">HYPER OS ENGINE READY</p>
</div>

<div class="menu-btn" style="position:absolute; top:35px; right:30px; z-index:1001; cursor:pointer;" onclick="toggleSidebar()">
  <div style="width:24px; height:2px; background:white; margin:6px 0; border-radius:10px;"></div>
  <div style="width:16px; height:2px; background:white; margin:6px 0; margin-left:8px; border-radius:10px;"></div>
</div>

<div class="sidebar glass" id="sidebar">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
    <h2 style="margin:0;">History Logs</h2>
    <span onclick="clearAllHistory()" style="font-size:10px; color:#ff3b30; font-weight:700; cursor:pointer;">CLEAR</span>
  </div>
  <ul id="historyList" style="list-style:none; padding:0; margin:0;"></ul>
  <div style="margin-top: 30px; opacity: 0.2; font-size: 9px; letter-spacing: 1px;">CORE ENGINE : IZUMI</div>
</div>

<div class="card glass">
  <div class="logo">IZUMI<span>.</span></div>
  <div class="subtitle">Nexus Advanced Media Saving System</div>

  <input id="linkInput" placeholder="Paste Instagram URL here..." autocomplete="off">
  <button onclick="startDownload()">FETCH MEDIA</button>

  <div id="statusBox" style="display:none; margin-top:25px; flex-direction:column; align-items:center;">
    <div style="width:28px; height:28px; border:3px solid rgba(255,255,255,0.1); border-top-color:#8f7bff; border-radius:50%; animation:spin 1s linear infinite;"></div>
    <p id="statusText" style="font-size:12px; margin-top:12px; opacity:0.8;"></p>
  </div>
  <div id="result"></div>
  <div class="footer">SYSTEM : NEXUS ‚Ä¢ CORE : IZUMI ‚Ä¢ DESIGNED BY : ROHIT</div>
</div>

<script>
@keyframes spin { to { transform: rotate(360deg); } }

window.addEventListener('load', () => {
  setTimeout(() => {
    const splash = document.getElementById('splash');
    splash.style.opacity = '0';
    setTimeout(() => { splash.style.display = 'none'; }, 800);
  }, 2000);
  renderHistory();
});

function toggleSidebar() {
  const sb = document.getElementById('sidebar');
  const ov = document.getElementById('overlay');
  const active = sb.classList.toggle('active');
  ov.style.display = active ? 'block' : 'none';
  requestAnimationFrame(() => ov.style.opacity = active ? '1' : '0');
}

function saveToHistory(username, description) {
  let history = JSON.parse(localStorage.getItem('nexus_logs') || '[]');
  const now = new Date();
  const timeStr = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
  const dateStr = now.toLocaleDateString('en-GB', {day:'2-digit', month:'short'});

  history.unshift({ user: username || "User", desc: description || "Media Log", dateTime: `${dateStr} ‚Ä¢ ${timeStr}` });
  localStorage.setItem('nexus_logs', JSON.stringify(history.slice(0, 15)));
  renderHistory();
}

function renderHistory() {
  const list = document.getElementById('historyList');
  const history = JSON.parse(localStorage.getItem('nexus_logs') || '[]');
  list.innerHTML = history.length === 0 ? '<li style="opacity:0.3; font-size:12px;">No recent logs.</li>' : history.map((item, i) => `
    <li class="history-item">
      <div class="history-user">@${item.user}</div>
      <div class="history-desc">${item.desc}</div>
      <div class="history-meta">üìÖ ${item.dateTime}</div>
      <div style="position:absolute; top:12px; right:15px; cursor:pointer; opacity:0.3;" onclick="toggleDel(event, ${i})">‚Ä¢‚Ä¢‚Ä¢</div>
      <div id="del-${i}" class="delete-dropdown" onclick="deleteItem(event, ${i})">DELETE</div>
    </li>
  `).join('');
}

function toggleDel(e, i) {
  e.stopPropagation();
  document.querySelectorAll('.delete-dropdown').forEach(d => d.style.display = 'none');
  document.getElementById(`del-${i}`).style.display = 'block';
}

function deleteItem(e, i) {
  e.stopPropagation();
  let history = JSON.parse(localStorage.getItem('nexus_logs'));
  history.splice(i, 1);
  localStorage.setItem('nexus_logs', JSON.stringify(history));
  renderHistory();
}

function clearAllHistory() { if(confirm("Clear logs?")) { localStorage.removeItem('nexus_logs'); renderHistory(); } }

async function startDownload() {
  const link = document.getElementById('linkInput').value.trim();
  const stBox = document.getElementById('statusBox');
  const stText = document.getElementById('statusText');
  const rs = document.getElementById('result');

  rs.innerHTML = "";
  if(!link) return;
  stBox.style.display = "flex";
  stText.innerText = "Izumi is fetching data...";

  try {
    const res = await fetch("/api/download", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ url: link })
    });
    const data = await res.json();
    if(data.status === "success") {
      stBox.style.display = "none";
      rs.innerHTML = `<a href="${data.link}" download style="display:inline-block; margin-top:20px; color:#fff; text-decoration:none; font-weight:700; padding:18px 40px; background:rgba(143,123,255,0.15); border:1.5px solid #8f7bff; border-radius:20px;">DOWNLOAD NOW</a>`;
      saveToHistory(data.username, data.description);
    } else { stText.innerText = "‚ö†Ô∏è " + data.message; }
  } catch (e) { stText.innerText = "üöÄ Connection Error."; }
}

document.addEventListener('click', () => document.querySelectorAll('.delete-dropdown').forEach(d => d.style.display = 'none'));
</script>
</body>
</html>
